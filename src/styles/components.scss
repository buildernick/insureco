// InsureCo Component Customizations
// Global component styling overrides for Carbon components

// ============================================
// Buttons
// ============================================
.cds--btn--primary {
  background-color: var(--interactive-primary);
  border-color: var(--interactive-primary);
  
  &:hover {
    background-color: var(--interactive-hover);
    border-color: var(--interactive-hover);
  }
  
  &:active {
    background-color: var(--interactive-active);
    border-color: var(--interactive-active);
  }
}

// ============================================
// Cards/Tiles
// ============================================
.cds--tile {
  background-color: var(--background-primary);
  border: 1px solid var(--border-subtle);
  box-shadow: var(--card-shadow);
  transition: box-shadow var(--motion-hover), transform var(--motion-hover);
  
  &:hover {
    box-shadow: var(--card-shadow-hover);
  }
}

.cds--tile--clickable {
  &:hover {
    transform: translateY(-2px);
  }
}

// ============================================
// Forms
// ============================================
.cds--text-input,
.cds--text-area,
.cds--select-input,
.cds--number__input-wrapper input {
  background-color: var(--field-background) !important;
  color: var(--field-text) !important;
  border-bottom-color: var(--border-strong);

  &:focus {
    outline-color: var(--interactive-primary);
    border-bottom-color: var(--interactive-primary);
    background-color: var(--field-background) !important;
  }

  // Ensure text remains visible in all states
  &:disabled {
    background-color: var(--background-secondary) !important;
    color: var(--text-tertiary) !important;
  }

  // Handle autofill states (browser autofill)
  // This prevents Chrome from applying white background on autofill in dark mode
  &:-webkit-autofill,
  &:-webkit-autofill:hover,
  &:-webkit-autofill:focus,
  &:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 1000px var(--field-background) inset !important;
    -webkit-text-fill-color: var(--field-text) !important;
    border-bottom-color: var(--border-strong);
  }

  // Firefox autofill
  &:-moz-autofill,
  &:-moz-autofill-preview {
    background-color: var(--field-background) !important;
    color: var(--field-text) !important;
  }
}

// Placeholder text styling
.cds--text-input::placeholder,
.cds--text-area::placeholder,
.cds--select-input::placeholder {
  color: var(--field-placeholder);
  opacity: 0.6;
}

.cds--label {
  color: var(--text-secondary);
}

.cds--form__helper-text {
  color: var(--text-tertiary);
}

// ============================================
// Content Switcher
// ============================================
.cds--content-switcher {
  background-color: var(--background-secondary);
}

.cds--content-switcher-btn {
  color: var(--text-primary) !important;
  background-color: transparent;

  &:hover {
    background-color: var(--background-hover);
  }

  &:focus {
    outline-color: var(--interactive-primary);
  }
}

.cds--content-switcher--selected {
  background-color: var(--background-primary) !important;
  color: var(--text-primary) !important;

  &:hover {
    background-color: var(--background-primary) !important;
  }
}

// ============================================
// Dropdowns
// ============================================
// IMPORTANT: Override Carbon's Dropdown default styles for theme support
// Carbon's dropdowns use hardcoded colors that don't adapt to custom themes

.cds--dropdown {
  background-color: var(--field-background) !important;
  border-bottom-color: var(--border-strong);

  &:hover {
    background-color: var(--background-hover);
  }
}

.cds--dropdown__wrapper {
  .cds--label {
    color: var(--text-secondary) !important;
  }
}

// Dropdown button/trigger
.cds--dropdown-text {
  color: var(--field-text) !important;
}

.cds--list-box__label {
  color: var(--field-text) !important;
}

.cds--list-box__field {
  background-color: var(--field-background) !important;
  border-bottom-color: var(--border-strong);

  &:focus {
    outline-color: var(--interactive-primary);
    border-bottom-color: var(--interactive-primary);
  }
}

// Dropdown menu items
.cds--list-box__menu {
  background-color: var(--background-primary) !important;
  border: 1px solid var(--border-subtle) !important;
  box-shadow: var(--dropdown-shadow) !important;
}

.cds--list-box__menu-item {
  background-color: var(--background-primary) !important;
  color: var(--text-primary) !important;

  &:hover {
    background-color: var(--background-hover) !important;
  }

  &[data-highlighted="true"] {
    background-color: var(--background-hover) !important;
    color: var(--text-primary) !important;
  }
}

.cds--list-box__menu-item__option {
  color: var(--text-primary) !important;
}

// Selected item styling
.cds--list-box__menu-item--active {
  background-color: var(--background-selected) !important;
  color: var(--text-primary) !important;

  .cds--list-box__menu-item__option {
    color: var(--text-primary) !important;
  }
}

// ============================================
// Navigation/Header
// ============================================
.cds--header {
  background-color: var(--background-primary);
  border-bottom: 1px solid var(--border-subtle);
}

.cds--header__name {
  color: var(--text-primary) !important;
  background-color: transparent !important;

  &:hover {
    color: var(--interactive-primary) !important;
    background-color: var(--background-hover) !important;
  }

  span,
  .cds--header__name--prefix {
    color: var(--text-primary) !important;
    background-color: transparent !important;
  }
}

.cds--header__menu-item,
.cds--header__menu-item a,
.cds--header__menu-item button {
  color: var(--text-primary);

  &:hover {
    background-color: var(--background-hover);
    color: var(--interactive-primary);
  }

  &:focus {
    border-color: var(--interactive-primary);
  }
}

.cds--header__nav {
  background-color: var(--background-primary);
}

.cds--header__menu-bar {
  background-color: var(--background-primary);
}

.cds--header__action {
  color: var(--text-primary);

  &:hover {
    background-color: var(--background-hover);
  }

  svg {
    fill: var(--text-primary);
  }
}

.cds--header__menu-toggle {
  svg {
    fill: var(--text-primary);
  }
}

.cds--side-nav {
  background-color: var(--background-secondary);

  .cds--side-nav__link,
  .cds--side-nav__menu-item {
    color: var(--text-primary);

    &:hover {
      background-color: var(--background-hover);
      color: var(--interactive-primary);
    }
  }
}

// ============================================
// Tables
// ============================================
.cds--data-table {
  background-color: var(--background-primary);
  
  thead {
    background-color: var(--background-secondary);
  }
  
  th {
    color: var(--text-primary);
    border-bottom: 1px solid var(--border-strong);
  }
  
  td {
    color: var(--text-primary);
    border-bottom: 1px solid var(--border-subtle);
  }
  
  tbody tr:hover {
    background-color: var(--background-hover);
  }
}

// ============================================
// Modals
// ============================================
.cds--modal {
  .cds--modal-container {
    background-color: var(--background-primary);
    box-shadow: var(--modal-shadow);
  }
  
  .cds--modal-header {
    border-bottom: 1px solid var(--border-subtle);
  }
  
  .cds--modal-footer {
    border-top: 1px solid var(--border-subtle);
  }
}

// ============================================
// Progress Bar (not ProgressIndicator)
// ============================================
.cds--progress-bar {
  .cds--progress-bar__bar {
    background-color: var(--interactive-primary);
  }
}

// ============================================
// Tags
// ============================================
.cds--tag {
  &.cds--tag--red {
    background-color: var(--color-brand-red-20);
    color: var(--color-brand-red-80);
  }
  
  &.cds--tag--green {
    background-color: var(--color-success-10);
    color: var(--color-success-70);
  }
}

// ============================================
// Notifications
// ============================================
.cds--inline-notification,
.cds--toast-notification {
  &.cds--inline-notification--error,
  &.cds--toast-notification--error {
    border-left-color: var(--color-error);
  }
  
  &.cds--inline-notification--success,
  &.cds--toast-notification--success {
    border-left-color: var(--color-success);
  }
  
  &.cds--inline-notification--warning,
  &.cds--toast-notification--warning {
    border-left-color: var(--color-warning);
  }
  
  &.cds--inline-notification--info,
  &.cds--toast-notification--info {
    border-left-color: var(--color-info);
  }
}

// ============================================
// Tabs
// ============================================
.cds--tabs {
  .cds--tabs__nav-link {
    color: var(--text-secondary);
    border-bottom-color: var(--border-subtle);
    
    &:hover {
      color: var(--text-primary);
      border-bottom-color: var(--border-strong);
    }
    
    &[aria-selected="true"] {
      color: var(--text-primary);
      border-bottom-color: var(--interactive-primary);
    }
  }
}

// ============================================
// Accordion
// ============================================
.cds--accordion__item {
  border-top: 1px solid var(--border-subtle);
  
  &:last-child {
    border-bottom: 1px solid var(--border-subtle);
  }
}

.cds--accordion__heading {
  &:hover {
    background-color: var(--background-hover);
  }
}

// ============================================
// Tooltips & Popovers
// ============================================
.cds--popover-content,
.cds--tooltip-content {
  background-color: var(--background-tertiary);
  color: var(--text-primary);
  box-shadow: var(--dropdown-shadow);
}

.cds--popover-caret {
  background-color: var(--background-tertiary);
}

// ============================================
// Content Area
// ============================================
.cds--content {
  background-color: var(--background-secondary);
  color: var(--text-primary);
}

// ============================================
// Leaflet Map Components
// ============================================
// IMPORTANT: Override Leaflet default styles for theme support
// Leaflet uses hardcoded colors that don't adapt to custom themes

// Zoom Controls
.leaflet-control-zoom {
  border: 1px solid var(--border-subtle) !important;
  box-shadow: var(--shadow-02) !important;
  border-radius: var(--radius-sm) !important;
  overflow: hidden;

  a {
    background-color: var(--background-primary) !important;
    color: var(--text-primary) !important;
    border-bottom: 1px solid var(--border-subtle) !important;
    transition: background-color var(--duration-fast-02) var(--easing-standard);

    &:hover {
      background-color: var(--background-hover) !important;
      color: var(--interactive-primary) !important;
    }

    &:last-child {
      border-bottom: none !important;
    }
  }
}

// Attribution Control
.leaflet-control-attribution {
  background-color: var(--background-primary) !important;
  color: var(--text-secondary) !important;
  border: 1px solid var(--border-subtle) !important;
  border-radius: var(--radius-sm) !important;
  box-shadow: var(--shadow-01) !important;
  font-size: var(--font-size-xs) !important;
  padding: var(--spacing-02) var(--spacing-03) !important;

  a {
    color: var(--interactive-primary) !important;

    &:hover {
      color: var(--interactive-hover) !important;
      text-decoration: underline;
    }
  }
}

// Map Container
.leaflet-container {
  background-color: var(--background-secondary) !important;
  font-family: var(--font-family-sans) !important;
}

// Tile Loading
.leaflet-tile-pane {
  opacity: 1;
  transition: opacity var(--duration-moderate-01) var(--easing-standard);
}

// Marker Shadow (ensure it's visible in dark mode)
.leaflet-marker-shadow {
  opacity: 0.3;
}

// Map Panes (ensure proper layering)
.leaflet-pane {
  z-index: auto;
}

// Interactive elements (ensure proper cursor)
.leaflet-interactive {
  cursor: pointer;
}

// ============================================
// Checkboxes
// ============================================
// IMPORTANT: Override Carbon checkbox styles for theme support
// Carbon checkboxes don't always adapt to custom themes properly

.cds--checkbox-label {
  color: var(--text-primary) !important;

  &::before {
    border-color: var(--border-strong) !important;
    background-color: var(--field-background) !important;
  }
}

.cds--checkbox:checked + .cds--checkbox-label::before {
  background-color: var(--interactive-primary) !important;
  border-color: var(--interactive-primary) !important;
}

.cds--checkbox:checked + .cds--checkbox-label::after {
  border-color: var(--text-on-color) !important;
}

.cds--checkbox:focus + .cds--checkbox-label::before {
  outline-color: var(--interactive-primary) !important;
  outline-offset: 2px;
}

.cds--checkbox:disabled + .cds--checkbox-label {
  color: var(--text-tertiary) !important;
  cursor: not-allowed;

  &::before {
    background-color: var(--background-secondary) !important;
    border-color: var(--border-subtle) !important;
  }
}
