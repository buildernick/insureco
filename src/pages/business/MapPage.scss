@use '../../styles/tokens' as *;

// ============================================
// Map Page
// ============================================

.map-page {
  padding-top: var(--spacing-06);
  padding-bottom: var(--spacing-07);

  // Page Header
  .page-header {
    margin-bottom: var(--spacing-06);

    .header-content {
      max-width: 100%;
    }

    .page-title {
      margin-bottom: var(--spacing-03);
      color: var(--text-primary);
    }

    .page-description {
      color: var(--text-secondary);
      font-size: var(--font-size-md);
      line-height: var(--line-height-body);
      margin: 0;
    }
  }

  // Map Column
  .map-column {
    margin-bottom: var(--spacing-05);

    .map-tile {
      padding: 0;
      height: calc(100vh - 280px);
      min-height: 500px;
      overflow: hidden;

      .map-view-container {
        height: 100%;

        .leaflet-map {
          border-radius: 0;
          box-shadow: none;
        }
      }
    }
  }

  // Sidebar Column
  .sidebar-column {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-05);

    // Asset Type Selection
    .asset-type-selection {
      padding: var(--spacing-05);
      background: var(--background-primary);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md);

      .cds--radio-button-group {
        gap: var(--spacing-03);
      }

      .cds--radio-button__label {
        font-size: var(--font-size-md);
        padding-left: var(--spacing-06);
      }

      .cds--radio-button-wrapper:not(:last-child) {
        margin-bottom: var(--spacing-03);
      }
    }

    // Summary Stats
    .stats-tile {
      padding: var(--spacing-05);

      .tile-heading {
        margin-bottom: var(--spacing-04);
        font-size: var(--font-size-lg);
        font-weight: var(--font-weight-semibold);
        color: var(--text-primary);
      }

      .stats-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--spacing-05);
      }

      .stat-item {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-02);
      }

      .stat-label {
        font-size: var(--font-size-sm);
        color: var(--text-secondary);
        font-weight: var(--font-weight-regular);
      }

      .stat-value {
        font-size: var(--heading-h3-size);
        font-weight: var(--font-weight-semibold);
        color: var(--text-primary);
        line-height: 1.2;
      }

      .stat-active {
        color: var(--color-support-success);
      }

      .stat-premium {
        color: var(--interactive-primary);
      }

      .stat-claims {
        color: var(--color-support-error);
      }
    }

    // Filters
    .filters-tile {
      padding: var(--spacing-05);

      .filters-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--spacing-04);

        .tile-heading {
          margin: 0;
          font-size: var(--font-size-lg);
          font-weight: var(--font-weight-semibold);
          color: var(--text-primary);
        }

        .clear-filters-btn {
          min-height: auto;
          padding: var(--spacing-03);
        }
      }

      .filters-content {
        // Cascading filter button container
        .faceted-filter-button {
          width: 100%;
        }
      }
    }

    // Legend
    .legend-tile {
      padding: var(--spacing-05);

      .tile-heading {
        margin-bottom: var(--spacing-04);
        font-size: var(--font-size-lg);
        font-weight: var(--font-weight-semibold);
        color: var(--text-primary);
      }

      .legend-items {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-04);
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: var(--spacing-04);
      }

      .legend-marker {
        width: 24px;
        height: 24px;
        border-radius: 50% 50% 50% 0;
        transform: rotate(-45deg);
        box-shadow: var(--shadow-01);
        flex-shrink: 0;
      }

      .property-legend {
        background: var(--interactive-primary);
      }

      .vehicle-legend {
        background: var(--color-brand-blue-60);
      }

      .legend-label {
        font-size: var(--font-size-md);
        color: var(--text-primary);
        font-weight: var(--font-weight-regular);
      }
    }
  }
}

// Dark theme adjustments
:root[data-carbon-theme="g90"],
:root[data-carbon-theme="g100"] {
  .map-page {
    .sidebar-column {
      .legend-tile {
        .vehicle-legend {
          background: var(--color-brand-blue-50);
        }
      }
    }
  }
}

// ============================================
// Responsive Layout
// ============================================

// Tablet
@media (max-width: 1056px) {
  .map-page {
    .map-column {
      .map-tile {
        height: 500px;
        min-height: 400px;
      }
    }

    .sidebar-column {
      margin-top: var(--spacing-05);
    }
  }
}

// Mobile
@media (max-width: 672px) {
  .map-page {
    padding-top: var(--spacing-05);
    padding-bottom: var(--spacing-06);

    .page-header {
      margin-bottom: var(--spacing-05);

      .page-title {
        font-size: var(--heading-h2-size);
      }

      .page-description {
        font-size: var(--font-size-sm);
      }
    }

    .map-column {
      margin-bottom: var(--spacing-05);

      .map-tile {
        height: 400px;
        min-height: 350px;
      }
    }

    .sidebar-column {
      gap: var(--spacing-04);
      margin-top: 0;

      .switcher-tile {
        padding: var(--spacing-04);
      }

      .stats-tile {
        padding: var(--spacing-04);

        .stats-grid {
          gap: var(--spacing-04);
        }

        .stat-value {
          font-size: var(--heading-h4-size);
        }
      }

      .filters-tile {
        padding: var(--spacing-04);

        .filters-content {
          gap: var(--spacing-04);
        }
      }

      .legend-tile {
        padding: var(--spacing-04);

        .legend-items {
          flex-direction: row;
          justify-content: space-around;
        }
      }
    }
  }
}
